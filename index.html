<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bound Artifact</title>

<style>

html,body{
margin:0;
height:100%;
background:#000;
overflow:hidden;
display:flex;
justify-content:center;
align-items:center;
perspective:3000px;
font-family:Helvetica;
}


/* SCENE */

.scene{
position:relative;
width:600px;
height:600px;
display:flex;
justify-content:center;
align-items:center;
transform-style:preserve-3d;
}


/* CORE */

.core{

position:absolute;
width:140px;
height:140px;
border-radius:50%;

background:
radial-gradient(circle,
rgba(255,255,255,1) 0%,
rgba(255,255,255,0.4) 20%,
rgba(255,255,255,0.1) 40%,
transparent 70%);

filter:blur(6px);

animation:coreBreath 4s ease-in-out infinite;

}

@keyframes coreBreath{

0%,100%{

transform:scale(1);
opacity:0.8;

}

50%{

transform:scale(1.15);
opacity:1;

}

}


/* ZOETROPE */

.zoetrope{

position:absolute;
width:260px;
height:320px;

transform-style:preserve-3d;

}


/* SLICE */

.slice{

position:absolute;

width:160px;
height:260px;

left:50px;
top:30px;

transform-style:preserve-3d;

}


/* FACE */

.face{

position:absolute;
width:100%;
height:100%;

background-size:cover;
background-position:center;

clip-path:polygon(
50% 0%,
85% 12%,
100% 50%,
85% 88%,
50% 100%,
15% 88%,
0% 50%,
15% 12%
);

}


/* LIGHT RESPONSE */

.face::after{

content:"";

position:absolute;
inset:0;

background:
linear-gradient(
90deg,
rgba(255,255,255,0.3),
transparent 30%,
transparent 70%,
rgba(0,0,0,0.7)
);

mix-blend-mode:screen;

}


/* CANVAS */

canvas{

position:absolute;

}

</style>
</head>
<body>


<div class="scene" id="scene">

<div class="core"></div>

<div class="zoetrope" id="zoetrope"></div>

<canvas id="dust"></canvas>

</div>


<script>


const zoetrope=document.getElementById("zoetrope")
const scene=document.getElementById("scene")

const canvas=document.getElementById("dust")
const ctx=canvas.getContext("2d")

canvas.width=600
canvas.height=600


/***********
CONFIG
***********/

const total=16

const radius=
160/(2*Math.tan(Math.PI/total))


/***********
BUILD CYLINDER
***********/

for(let i=0;i<total;i++){

const slice=document.createElement("div")
slice.className="slice"

const face=document.createElement("div")
face.className="face"

face.style.backgroundImage=
`url(https://picsum.photos/500/700?random=${i})`

slice.appendChild(face)

const angle=i*(360/total)

slice.style.transform=
`rotateY(${angle}deg) translateZ(${radius}px)`

zoetrope.appendChild(slice)

}


/***********
PHYSICS ENGINE
***********/

let rotation=0
let velocity=0.2

let isDragging=false
let lastX=0

let targetRotation=0


function animate(){

rotation+=velocity

velocity*=0.97

zoetrope.style.transform=
`rotateY(${rotation}deg)`

requestAnimationFrame(animate)

}

animate()


/***********
DRAG
***********/

window.addEventListener("mousedown",e=>{

isDragging=true
lastX=e.clientX

})

window.addEventListener("mousemove",e=>{

if(!isDragging)return

let delta=e.clientX-lastX

velocity=delta*0.12

lastX=e.clientX

})

window.addEventListener("mouseup",()=>{

isDragging=false

})


/***********
DUST ORBIT
***********/

class Particle{

constructor(){

this.angle=Math.random()*Math.PI*2

this.radius=80+Math.random()*200

this.speed=0.002+Math.random()*0.004

this.size=Math.random()*2

}

update(){

this.angle+=this.speed

this.x=
300+
Math.cos(this.angle)*this.radius

this.y=
300+
Math.sin(this.angle)*this.radius

}

draw(){

ctx.beginPath()

ctx.arc(this.x,this.y,this.size,0,Math.PI*2)

ctx.fillStyle=
"rgba(255,255,255,0.6)"

ctx.fill()

}

}


const particles=[]

for(let i=0;i<200;i++){

particles.push(new Particle())

}


function dustEngine(){

ctx.clearRect(0,0,600,600)

particles.forEach(p=>{

p.update()
p.draw()

})

requestAnimationFrame(dustEngine)

}

dustEngine()


/***********
PROXIMITY AWARENESS
***********/

let mouseX=0

window.addEventListener("mousemove",e=>{

mouseX=e.clientX

let force=
(mouseX-window.innerWidth/2)*0.0005

velocity+=force

})


</script>

</body>
</html>
